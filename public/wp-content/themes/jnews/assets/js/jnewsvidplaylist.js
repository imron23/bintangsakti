!function(){"use strict";window.jnews=window.jnews||{},window.jnews.vidplaylist=window.jnews.vidplaylist||{};var e=function(){var e="object"==typeof jnews&&"object"==typeof jnews.library,t="function"==typeof jnews.tns;if(t&&e){var i=jnews.library;return function(e){e=i.extend({container:".jeg_video_playlist",textDirection:"ltr",controlsText:["",""],nav:!1,loop:!1,controls:!0,items:8,gutter:0,autoHeight:!0,responsive:{0:{items:2},480:{items:3},568:{items:4},768:{items:7},1024:{items:8}}},e||{});var t=function(e){this.construct(e)};t.prototype.construct=function(e){var t=this;if(t.options=e,t.tempOptions=t.options,t.element="string"==typeof t.options.container?i.globalBody.querySelectorAll(t.options.container):t.options.container,t.element.length)i.forEach(t.element,(function(e,n){t.tempOptions.container=e,t.construct(t.tempOptions);var o=i.extend({},e.dataset,t);i.dataStorage.put(e,"jeg.vidplaylist",o)}));else{var n=i.extend({},t.element.dataset,t);i.dataStorage.put(t.element,"jeg.vidplaylist",n),t.unique=t.element.dataset.unique,t.data=window[t.unique],t.init()}},t.prototype.init=function(){var e=this;e.playlist=e.element.querySelector(".jeg_video_playlist_list_inner_wrapper"),e.playlist_item=e.playlist.getElementsByClassName("jeg_video_playlist_item_wrapper"),i.hasClass(e.element,"jeg_vertical_playlist")?e.vertical_playlist():e.horizontal_playlist(),e.video=e.element.getElementsByTagName("video"),e.video.length&&"function"==typeof e.video.mediaelementplayer&&e.video.mediaelementplayer(),e.bind_click(),e.autoload_video()},t.prototype.autoload_video=function(){i.forEach(i.globalBody.getElementsByClassName("jeg_video_playlist"),(function(e,t){i.hasClass(e,"loaded")||new Waypoint({element:e,handler:function(){if(!i.hasClass(e,"loaded")){var t=this.element,n=t.querySelector(".jeg_video_container");if(n&&(n.nodeName||"object"==typeof n&&n.length)){var o=n.children[0].getAttribute("src");o?n.innerHTML='<iframe src="'+o+'" allowfullscreen="" height="500" width="700"></iframe>':(o=(n=t.querySelector(".jeg_video_container video")).children[0].getAttribute("src"),n.innerHTML='<source type="video/mp4" src="'+o+'">');var l=e.querySelector(".jeg_preview_slider_loader");l.parentNode.removeChild(l),i.addClass(t,"loaded")}}},offset:"100%"})}))},t.prototype.horizontal_playlist=function(){var e=this,t=i.getWidth(e.element),n=Math.floor(t/160),o=n-1,l=i.hasClass(e.element,"jeg_dark_playlist")?"":10;if(void 0!==e.playlist){var a=i.extend(e.tempOptions,{container:e.playlist,textDirection:e.tempOptions.textDirection,controlsText:["",""],nav:!1,loop:!1,controls:!0,items:n,gutter:l,autoHeight:!0,mouseDrag:!0,responsive:{0:{items:2},480:{items:3},568:{items:4},768:{items:o},1024:{items:n}}});if(!i.hasClass(a.container,"jeg_tns_active")){var r=jnews.tns(a);void 0!==r&&(r.events.on("dragStart",(function(e){e.event.preventDefault(),e.event.stopPropagation()})),i.addClass(a.container,"jeg_tns_active"),i.dataStorage.put(a.container,"tiny-slider",r))}}},t.prototype.vertical_playlist=function(){var e=this;e.playlist.style.display="block";var t=jQuery(e.playlist).jScrollPane({contentWidth:"100%"}).data("jsp");e.vertical_resize=function(t){var n=e.element.querySelector(".jeg_video_playlist_current"),o=e.element.querySelector(".jeg_video_playlist_video_content"),l=e.playlist,a=i.getHeight(o),r=i.windowWidth();if(i.hasClass(e.element,"jeg_col_12")&&r>768||(i.hasClass(e.element,"jeg_col_9")||i.hasClass(e.element,"jeg_col_9"))&&r>1024)a=i.getHeight(o)-i.getHeight(n);else{for(var s=e.playlist_item,d=0,c=0;c<3;c++)s.length&&void 0!==s[c]&&(d+=i.getHeight(s[c]));a=d}l.style.height=a+"px",t.reinitialise()};var n={resize:function(){e.vertical_resize(t)}.bind(e),load:function(){setTimeout((function(){e.vertical_resize(t)}),200)}.bind(e)};i.addEvents(i.win,n),e.vertical_resize(t)},t.prototype.load_content=function(e,t){var n=e.parentNode,o=i.getParents(n,".jeg_video_playlist_wrapper"),l=(o=o.length?o[o.length-1]:i.doc).querySelector(".jeg_video_holder"),a=o.querySelector(".jeg_video_playlist_current_info"),r=l.querySelector(".jeg_preview_slider_loader"),s=i.doc.createElement("div");s.innerHTML=t.tag;var d=s.querySelector("div.jeg_video_container");l.appendChild(d),"mediaplayer"===t.type?jQuery(l).find("video").mediaelementplayer({success:function(e){r.parentNode.removeChild(r),e.play()}}):jQuery(l).find("iframe").on("load",(function(){r.parentNode.removeChild(r)}));var c=e.querySelector(".jeg_video_playlist_title"),p="<a href='"+e.getAttribute("href")+"'>"+(c.innerText||c.textContent)+"</a>";l.style.height="auto",a.querySelector("h2").innerHTML=p;var _=a.querySelector("span");if(_){var v=e.querySelector(".jeg_video_playlist_category");_.innerText&&(_.innerText=v.innerText||v.textContent),_.textContent&&(_.textContent=v.innerText||v.textContent)}},t.prototype.bind_click=function(){var e=this;i.forEach(e.playlist_item,(function(t,n){i.addEvents(t,{click:function(n){n.preventDefault();var o=t.querySelector("a.jeg_video_playlist_item").dataset.id,l=t.parentNode,a=i.getParents(l,".jeg_video_playlist_wrapper"),r=(a=a.length?a[a.length-1]:i.doc).querySelector(".jeg_video_holder");return i.forEach(a.querySelectorAll("a.jeg_video_playlist_item"),(function(e,t){i.removeClass(e,"active")})),i.addClass(t.querySelector("a.jeg_video_playlist_item"),"active"),r.style.height=i.getHeight(r),r.innerHTML="<div class='jeg_preview_slider_loader'><div class='jeg_preview_slider_loader_circle'></div></div>",e.load_content(t.querySelector("a.jeg_video_playlist_item"),e.data[o]),!1}})}))},new t(e)}}t||console.warn("Tiny Slider could not be found"),e||console.warn("JNews Library could not be found")}();window.jnews.vidplaylist=e}();