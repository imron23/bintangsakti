!function(t){"use strict";var e=[],i=[],a=[],n=[],s=[];function r(r){r.each(function(){if(t(this).parents(".tocopy").length<=0){vp.init_controls(t(this));var r=t(this).attr("id"),o=(t(this).attr("id"),t(this).attr("data-vp-validation")),p=t(this).attr("data-vp-bind"),l=t(this).attr("data-vp-items-bind"),d=t(this).attr("data-vp-dependency"),u=t(this).attr("data-active-callback"),c=t(this).getDatas().type;o&&e.push({name:r,rules:o,type:c}),void 0!==p&&!1!==p&&p&&i.push({bind:p,type:c,source:r}),void 0!==l&&!1!==l&&l&&a.push({bind:l,type:c,source:r}),void 0!==d&&!1!==d&&d&&n.push({dep:d,type:"field",source:r}),void 0!==u&&!1!==u&&u&&s.push({callback:u,type:"field",source:r})}})}function o(e){e.each(function(){if(t(this).parents(".tocopy").length<=0&&!t(this).hasClass(".tocopy")){var e=t(this).attr("data-vp-dependency"),i=t(this).attr("data-active-callback"),a=(t(this).getDatas().type,t(this).attr("id"));void 0!==e&&!1!==e&&e&&n.push({dep:e,type:"section",source:a}),void 0!==i&&!1!==i&&i&&s.push({callback:i,type:"section",source:a})}})}function p(t){for(var e=0;e<t.length;e++){var i=t[e],a=i.bind.split("|"),n=a[0],s=a[1],r=[],o="";o=(o=i.source.replace("[]","")).substring(0,o.lastIndexOf("[")),s=s.split(/[\s,]+/);for(var p=0;p<s.length;p++)s[p]=o+"["+s[p]+"]",r.push(s[p]);for(p=0;p<r.length;p++)vp.binding_event(r,p,i,n,".vp-metabox","metabox")}}function l(t){for(var e=0;e<t.length;e++){var i=t[e],a=i.bind.split("|"),n=a[0],s=a[1],r=[],o="";o=(o=i.source.replace("[]","")).substring(0,o.lastIndexOf("[")),s=s.split(/[\s,]+/);for(var p=0;p<s.length;p++)s[p]=o+"["+s[p]+"]",r.push(s[p]);for(p=0;p<r.length;p++)vp.items_binding_event(r,p,i,n,".vp-metabox","metabox")}}function d(t){for(var e=0;e<t.length;e++){var i=t[e],a=i.dep.split("|"),n=a[0],s=a[1],r=[],o="";if("field"===i.type)o=(o=i.source.replace("[]","")).substring(0,o.lastIndexOf("["));else if("section"===i.type){o=jQuery(vp.jqid(i.source)).parents(".wpa_group").length>0?jQuery(vp.jqid(i.source)).parents(".wpa_group").first().attr("id"):(o=jQuery(vp.jqid(i.source)).parents(".postbox").attr("id")).substring(0,o.lastIndexOf("_"))}s=s.split(",");for(var p=0;p<s.length;p++)s[p]=o+"["+s[p]+"]",r.push(s[p]);for(p=0;p<r.length;p++)vp.dependency_event(r,p,i,n,".vp-metabox")}}function u(t){for(var e=0;e<t.length;e++){var i=t[e],a=JSON.parse(i.callback),n="";if("field"===i.type)n=(n=i.source.replace("[]","")).substring(0,n.lastIndexOf("["));else if("section"===i.type){n=jQuery(vp.jqid(i.source)).parents(".wpa_group").length>0?jQuery(vp.jqid(i.source)).parents(".wpa_group").first().attr("id"):(n=jQuery(vp.jqid(i.source)).parents(".postbox").attr("id")).substring(0,n.lastIndexOf("_"))}for(var s=0;s<a.length;s++){c(n+"["+a[s].field+"]",n,i)}v(n,i)}}function c(e,i,a){var n=vp.thejqname(e,"option");t(".vp-metabox").on("change",n,function(){v(i,a)})}function v(t,e){for(var i=JSON.parse(e.callback),a=jQuery(vp.jqid(e.source)),n=[],s=!0,r=0;r<i.length;r++){var o=i[r],p=t+"["+o.field+"]",l=jQuery('[name="'+p+'"]').not('[type=hidden]').validationVal();n.push(jQuery(vp.jqid(p))),h(o.operator,o.value,l)||(s=!1)}s?(a.removeClass("vp-dep-inactive"),a.vp_fadeIn()):(a.addClass("vp-dep-inactive"),a.vp_fadeOut())}function h(t,e,i){return"==="===t?e===i:"="===t||"=="===t?e==i:"!=="===t?e!==i:"!="===t?e!=i:">="===t?e>=i:"<="===t?e<=i:">"===t?e>i:"<"===t?e<i:"in"===t?e.indexOf(i)>=0:"ex"===t?e.indexOf(i)<0:void 0}t(".vp-metabox").on("click",".vp-wpa-group-title",function(e){e.preventDefault();var i=t(this).parents(".wpa_group:first"),a=i.find(".vp-controls:first");i.siblings(".wpa_group:not(.tocopy)"),t("html, body");return a.hasClass("vp-hide")?a.slideUp(0,function(){t(this).removeClass("vp-hide").slideDown("fast")}):a.slideUp("fast",function(){t(this).addClass("vp-hide").slideDown(0)}),!1}),t(document).ready(function(){var e;r(jQuery(".vp-metabox .vp-field")),o(jQuery(".vp-metabox .vp-meta-group")),p(i),l(a),d(n),u(s),e=[],t(".wpa_loop.vp-sortable").sortable({items:">.wpa_group",handle:".vp-wpa-group-heading",axis:"y",opacity:.5,tolerance:"pointer",start:function(i,a){void 0!==window.KIA_metabox&&(e=[],vp.tinyMCE_save(),t(a.item).find(".customEditor textarea").each(function(){if(t(this).parents(".tocopy").length<=0){try{tinyMCE.execCommand("mceRemoveControl",!1,this.id)}catch(t){}e.push(vp.jqid(this.id))}}))},stop:function(i,a){if(void 0!==window.KIA_metabox){for(var n=e.length-1;n>=0;n--)(s=t(e[n])).val(switchEditors.wpautop(s.val()));e=e.join(", ");try{for(KIA_metabox.runTinyMCE(t(e)),vp.tinyMCE_save(),n=e.length-1;n>=0;n--){var s;(s=t(e[n])).val(switchEditors.pre_wpautop(s.val()))}}catch(t){}}}})}),vp.is_multianswer=function(t){return-1!==jQuery.inArray(t,["vp-checkbox","vp-checkimage","vp-multiselect"])},vp.custom_check_radio_event(".vp-metabox",".vp-field.vp-checkimage .field .input label"),vp.custom_check_radio_event(".vp-metabox",".vp-field.vp-radioimage .field .input label"),t("#post").on("submit",function(i){var a,n=t("input[type=submit][clicked=true]"),s=n.val();if(vp.tinyMCE_save(),t(".vp-field").removeClass("vp-error"),t(".validation-msg.vp-error").remove(),t(".vp-metabox-error").remove(),(a=vp.fields_validation_loop(e))>0){var r=t('<span class="vp-metabox-error vp-js-tipsy" original-title="'+a+' error(s) found in metabox"></span>');"Save Draft"===s?(t("#minor-publishing-actions .spinner, #minor-publishing-actions .ajax-loading").hide(),r.tipsy(),r.insertAfter("#minor-publishing-actions .spinner, #minor-publishing-actions .ajax-loading"),t("#save-post").prop("disabled",!1).removeClass("button-disabled")):"Publish"!==s&&"Update"!==s||(t("#publishing-action .spinner, #publishing-action .ajax-loading").hide(),r.tipsy(),r.insertAfter("#publishing-action .spinner, #publishing-action .ajax-loading"),t("#publish").prop("disabled",!1).removeClass("button-primary-disabled"));var o=Math.ceil((n.outerHeight()-r.height())/2);return o>0&&r.css("margin-top",o),void i.preventDefault()}t(this).find(".vp-toggle .vp-input").each(function(){var e=t("<input>",{type:"hidden",name:this.name,value:0});t(this).before(e)})}),t("#post input[type=submit]").on("click",function(){t("input[type=submit]",t(this).parents("form")).removeAttr("clicked"),t(this).attr("clicked","true")}),t.wpalchemy.on("wpa_copy",function(t,e){i=[],n=[],a=[],e.find('input[class="tocopy-hidden"]').first().remove(),r(e.find(".vp-field")),o(e.find(".vp-meta-group")),e.find(".vp-wpa-group-title:first").click(),p(i),l(a),d(n),u(s)})}(jQuery),function(t){"use strict";t(document).ready(function(){t(".vp-multiauthor-wrapper input.input-sortable").each(function(){if(t(this).hasClass("selectized"));else{var e=t(this),i=e.parent().find(".data-option"),a=!1;e.hasClass("vp-ajax-load")&&(a=!0),i.length&&(i=JSON.parse(i.text()),t(this).selectize({plugins:["drag_drop","remove_button"],options:i,persist:!0,create:!0,hideSelected:!0,valueField:"value",labelField:"text",render:{option:function(t,e){var i=t.text;return a?void 0===i?"<div><span>"+t.value+"</span></div>":"<div><span>"+i+"</span></div>":'<div class="'+t.class+'"><span>'+t.text+"</span></div>"}},load:function(e,i){if(a){if(!e.length||e.length<3)return i();t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{string:e,action:"vp_find_ajax_author"},error:function(){i()},success:function(t){i(t)}})}}}))}}),t(".vp-multitermhierarchy-wrapper input.input-sortable").each(function(){if(t(this).hasClass("selectized"));else{var e=t(this),i=e.parent().find(".data-option"),a=!1;e.hasClass("vp-ajax-load")&&(a=!0),i.length&&(i=JSON.parse(i.text()),t(this).selectize({plugins:["drag_drop","remove_button"],options:i,persist:!0,create:!0,hideSelected:!0,render:{option:function(t,e){var i=t.text;return a?void 0===i?"<div><span>"+t.value+"</span></div>":"<div><span>"+i+"</span></div>":'<div class="'+t.class+'"><span>'+t.text+"</span></div>"}},load:function(e,i){if(a){if(!e.length||e.length<3)return i();t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{string:e,action:"vp_find_ajax_post_category"},error:function(){i()},success:function(t){i(t)}})}}}))}}),t(".vp-singletermhierarchy-wrapper input.input-sortable").each(function(){if(t(this).hasClass("selectized"));else{var e=t(this),i=e.parent().find(".data-option"),a=!1;e.hasClass("vp-ajax-load")&&(a=!0),i.length&&(i=JSON.parse(i.text()),t(this).selectize({plugins:["drag_drop","remove_button"],options:i,persist:!0,create:!0,hideSelected:!0,render:{option:function(t,e){var i=t.text;return a?void 0===i?"<div><span>"+t.value+"</span></div>":"<div><span>"+i+"</span></div>":'<div class="'+t.class+'"><span>'+t.text+"</span></div>"}},load:function(e,i){if(a){if(!e.length||e.length<3)return i();t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{string:e,action:"vp_find_ajax_post_category"},error:function(){i()},success:function(t){i(t)}})}},onItemAdd:function(){var t=this.items;if(t.length>1)for(var e=0;e<t.length;e++)this.removeItem(t[e]),this.refreshOptions()}}))}}),t(".vp-multipost-wrapper input.input-sortable").each(function(){if(t(this).hasClass("selectized"));else{var e=t(this).parent().find(".data-option");e=JSON.parse(e.text()),t(this).selectize({plugins:["drag_drop","remove_button"],persist:!0,create:!0,hideSelected:!0,valueField:"value",labelField:"text",options:e,render:{option:function(t,e){var i=t.text;return void 0===i?"<div><span>"+t.value+"</span></div>":"<div><span>"+i+"</span></div>"}},load:function(e,i){if(!e.length||e.length<3)return i();t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{string:e,action:"vp_find_ajax_post"},error:function(){i()},success:function(t){i(t)}})}})}}),t(".vp-multitag-wrapper input.input-sortable").each(function(){if(t(this).hasClass("selectized"));else{var e=t(this),i=e.parent().find(".data-option"),a=!1;e.hasClass("vp-ajax-load")&&(a=!0),i.length&&(i=JSON.parse(i.text()),t(this).selectize({plugins:["drag_drop","remove_button"],options:i,persist:!0,create:!0,hideSelected:!0,valueField:"value",labelField:"text",render:{option:function(t,e){var i=t.text;return a?void 0===i?"<div><span>"+t.value+"</span></div>":"<div><span>"+i+"</span></div>":'<div class="'+t.class+'"><span>'+t.text+"</span></div>"}},load:function(e,i){if(a){if(!e.length||e.length<3)return i();t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{string:e,action:"vp_find_ajax_post_tag"},error:function(){i()},success:function(t){i(t)}})}}}))}}),t(".vp-tabs").tabs()})}(jQuery);